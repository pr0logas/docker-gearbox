FROM alpine:3.9
MAINTAINER Gearbox Team <team@gearbox.works>

ARG GEARBOX_CONTAINER_NAME="gearbox-base"
ARG GEARBOX_CONTAINER_VERSION="3.9"
ARG GEARBOX_USER="gearbox"
ARG GEARBOX_UID="1000"
ARG GEARBOX_GROUP="gearbox"
ARG GEARBOX_GID="1000"
ARG GEARBOX_HTTP_PROXY="http://proxy:3128/"
ARG GEARBOX_HTTPS_PROXY="http://proxy:3128/"

ENV GEARBOX_CONTAINER_NAME $GEARBOX_CONTAINER_NAME
ENV GEARBOX_CONTAINER_VERSION $GEARBOX_CONTAINER_VERSION
ENV GEARBOX_USER $GEARBOX_USER
ENV GEARBOX_UID $GEARBOX_UID
ENV GEARBOX_GROUP $GEARBOX_GROUP
ENV GEARBOX_GID $GEARBOX_GID
ENV http_proxy $GEARBOX_HTTP_PROXY
ENV https_proxy $GEARBOX_HTTP_PROXY

COPY container.json /build/container.json
COPY build /build
RUN /bin/sh /build/build.sh

WORKDIR /project
EXPOSE 9970
USER root

CMD	[ "/bin/bash", "-l" ]
